@inject CBlocksHelperVM BlocksHelper
@model IEnumerable<CCoinDataVM>
@{
    int counter = 0;
    string coins_route = Url.RouteUrl(new { Action = "Index", Controller = "Coins" });
}
<div class="dc-market-coins dcg-shadow dcg-table-sort-icons">
    <div class="dc-market-coins__header">
        @await Html.PartialAsync("_MarketSearch")
        <a class="dc-market-coins__search-by" href="#">Sort coins by <svg icon="sort-down-arrow"></svg></a>
    </div>  
    @await Html.PartialAsync("_Table", new CTableVM<CCoinDataVM> (Model)
        .Add("#", i => (++counter).ToString())
        .Add("Name<svg><use xlink:href='/images/svg-sprite.svg#up-down-arrows'></svg>", i => Html.Partial("_Coin", i))
        .Add("Price<svg><use xlink:href='/images/svg-sprite.svg#up-down-arrows'></svg>", i => $"<span class='text-primary'>${i.data.usd_price}</span>")
        .Add("Volume (24h)<svg><use xlink:href='/images/svg-sprite.svg#up-down-arrows'></svg>", i => "$" + ((long)i.data.volume_24h).ToString())
        .Add("Market Cap<svg><use xlink:href='/images/svg-sprite.svg#up-down-arrows'></svg>", i => "$" + ((long)i.data.market_cap).ToString())
        .Add("Change (24h)<svg><use xlink:href='/images/svg-sprite.svg#up-down-arrows'></svg>", i => $"<span class='{(i.data.day_percent_change < 0 ? "dcg-value-down'>" : "dcg-value-up'>+")}{i.data.day_percent_change.ToString()}%</span>")
        .Add("Exchange", i => $"<div class='dc-market-coins__exchange'><a class='btn dcg-btn' href='{coins_route}/{i.data.name}'>Exchange</a><svg><use xlink:href='/images/svg-sprite.svg#exchange-cycle-dark'></svg></div>")
    )
</div>